[
  {
    "objectID": "Statistical_Functions_Assignment.html",
    "href": "Statistical_Functions_Assignment.html",
    "title": "ST558-HW4",
    "section": "",
    "text": "Task 1: Conceptual Questions\n\nWhat is the purpose of the lapply() function? What is the equivalent purrr function?\nlapply() applies a function over a list or vector and returns a list of the same length. The equivalent function in the purrr package is map(), which also returns a list.\nSuppose we have a list called my_list. Each element of the list is a numeric data frame (all columns are numeric). We want to use lapply() to run the code cor(numeric_matrix, method = \"kendall\") on each element of the list. Write code to do this below! (I’m really trying to ask you how you specify method = \"kendall\" when calling lapply()\nmy_list &lt;- list(\n  data.frame(a = rnorm(10), b = rnorm(10)),\n  data.frame(a = rnorm(10), b = rnorm(10))\n)\n\nresult &lt;- lapply(my_list, function(x) cor(x, method = \"kendall\"))\nWhat are two advantages of using purrr functions instead of the BaseR apply family?\n\npurrr functions have a consistent syntax and naming convention, making the code easier to read and write.\npurrr functions provide better error handling and more options for managing complex data, like nested lists.\n\nWhat is a side-effect function?\nA side-effect function performs an action beyond returning a value. For example, modifying a global variable.\nWhy can you name a variable sd in a function and not cause any issues with the sd function?\nThe scope of a variable inside a function is limited to that function. Naming a variable sd within a function does not interfere with the global sd function because R can differentiate between the local variable and the global function.\n\n\n\nTask 2 - Writing R Functions\n\nWrite a basic function (call it getRMSE()) that takes in a vector of responses and a vector of predictions and outputs the RMSE.\n\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\ngetRMSE &lt;- function(actual, predicted, ...) {\nsqrt(mean((actual - predicted)^2, ...))\n}\n\n\nRun the following code to create some response values and predictions. Test your RMSE function using this data.\n\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10*x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n# Test RMSE function\ngetRMSE(resp, pred)\n\n[1] 0.9581677\n\n# Introduce NA values\nresp[c(1, 2)] &lt;- NA\n\n# Test RMSE function with NA values\ngetRMSE(resp, pred, na.rm = TRUE)\n\n[1] 0.9661699\n\n\n\nWrite a function called getMAE() that follows the specifications of the getRMSE() function.\n\ngetMAE &lt;- function(actual, predicted, ...) {\n  mean(abs(actual - predicted), ...)\n}\n\nRun the following code to create some response values and predictions. Test your MAE function using this data.\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10*x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n# Test MAE function\ngetMAE(resp, pred)\n\n[1] 0.8155776\n\n# Introduce NA values\nresp[c(1, 2)] &lt;- NA\n\n# Test MAE function with NA values\ngetMAE(resp, pred, na.rm = TRUE)\n\n[1] 0.8241201\n\n\nCreate a wrapper function that can be used to get either or both metrics returned with a single function call.\n\ngetMetrics &lt;- function(actual, predicted, metrics = c(\"RMSE\", \"MAE\"), ...) {\n  if (!(is.vector(actual) && is.atomic(actual) && is.numeric(actual) &&\n        is.vector(predicted) && is.atomic(predicted) && is.numeric(predicted))) {\n    message(\"Both inputs must be numeric vectors.\")\n    return(NULL)\n  }\n\n  results &lt;- list()\n  if (\"RMSE\" %in% metrics) results$RMSE &lt;- getRMSE(actual, predicted, ...)\n  if (\"MAE\" %in% metrics) results$MAE &lt;- getMAE(actual, predicted, ...)\n\n  return(results)\n}\n\nRun the following code to create some response values and predictions. Test your new function using this data.\n\nset.seed(10)\nn &lt;- 100\nx &lt;- runif(n)\nresp &lt;- 3 + 10*x + rnorm(n)\npred &lt;- predict(lm(resp ~ x), data.frame(x))\n\n# Test getMetrics function\ngetMetrics(resp, pred)\n\n$RMSE\n[1] 0.9581677\n\n$MAE\n[1] 0.8155776\n\ngetMetrics(resp, pred, metrics = \"RMSE\")\n\n$RMSE\n[1] 0.9581677\n\ngetMetrics(resp, pred, metrics = \"MAE\")\n\n$MAE\n[1] 0.8155776\n\n# Introduce NA values\nresp[c(1, 2)] &lt;- NA\n\n# Test getMetrics function with NA values\ngetMetrics(resp, pred, na.rm = TRUE)\n\n$RMSE\n[1] 0.9661699\n\n$MAE\n[1] 0.8241201\n\n# Test with incorrect data\ngetMetrics(data.frame(resp), pred)\n\nBoth inputs must be numeric vectors.\n\n\nNULL\n\ngetMetrics(resp, data.frame(pred))\n\nBoth inputs must be numeric vectors.\n\n\nNULL\n\n\n\n\n\nTask 3 - Querying an API and a Tidy-Style Function\n\nUse GET() from the httr package to return information about a topic that you are interested in that has been in the news lately.\nParse what is returned and find your way to the data frame that has the actual article information in it.\nWrite a quick function that allows the user to easily query this API.\n\n\n# Load necessary packages\nlibrary(httr)\nlibrary(jsonlite)\n\n\nAttaching package: 'jsonlite'\n\n\nThe following object is masked from 'package:purrr':\n\n    flatten\n\nlibrary(dplyr)\n\n# Function to query the News API\nquery_news_api &lt;- function(topic, from_date, api_key) {\n  # Define the base URL for the News API\n  base_url &lt;- \"https://newsapi.org/v2/everything\"\n  \n  # Make the GET request\n  response &lt;- GET(base_url, query = list(\n    q = topic,\n    from = from_date,\n    apiKey = api_key\n  ))\n  \n  # Check if the request was successful\n  if (status_code(response) != 200) {\n    stop(\"Failed to fetch data from the News API.\")\n  }\n  \n  # Parse the response content\n  content &lt;- content(response, as = \"text\")\n  json_data &lt;- fromJSON(content, flatten = TRUE)\n  \n  # Extract articles into a data frame\n  articles_df &lt;- json_data$articles\n  \n  return(articles_df)\n}\n\n\n#key is dead dont worry \napi_key &lt;- \"98bec7bb7a124469b04c6e019b33abee\"\narticles_df1 &lt;- query_news_api(\"technology\", \"2024-06-01\", api_key)\narticles_df2 &lt;- query_news_api(\"finance\", \"2024-06-01\", api_key)\n\n\n\nprint(head(articles_df1))\n\n         author\n1   Steven Levy\n2   Will Knight\n3 David Gilbert\n4 Lawrence Bonk\n5     Emma Roth\n6    Matt Novak\n                                                              title\n1 Don’t Let Mistrust of Tech Companies Blind You to the Power of AI\n2                   OpenAI Offers a Peek Inside the Guts of ChatGPT\n3                                        Neo-Nazis Are All-In On AI\n4       Nokia just made the first phone call using 3D spatial audio\n5                            Elon Musk drops lawsuit against OpenAI\n6            AI Turns Classic Memes Into Hideously Animated Garbage\n                                                                                                                                                                                                                                                              description\n1                                                                                                                               It’s OK to be doubtful of tech leaders’ grandiose visions of our AI future—but that doesn’t mean the technology won’t have a huge impact.\n2                                                                                Days after former employees said the company was being too reckless with its technology, OpenAI released a research paper on a method for reverse engineering the workings of AI models.\n3                                                                              Extremists are developing their own hateful AIs to supercharge radicalization and fundraising—and are now using the tech to make weapon blueprints and bombs. And it’s going to get worse.\n4 Nokia just announced that it has made the first-ever audio and video call using 3D spatial audio\\r\\n. This is actually a big deal, as all phone calls currently made over a cellular network are monophonic, so there’s no possibility for spatial audio.\\nThis call, …\n5                                                                                                                                       Elon Musk was suing ChatGPT maker OpenAI and its CEO, Sam Altman, for a breach of contract, but now the lawsuit has been dropped.\n6    Have you ever wondered what your favorite memes might look like if they were animated? Well, wonder no longer. Thanks to advancements in artificial intelligence technology, you can now see those static images come to life. And they look like absolute dogshit.…\n                                                                                                      url\n1                  https://www.wired.com/story/dont-let-mistrust-of-tech-companies-blind-you-power-of-ai/\n2                            https://www.wired.com/story/openai-offers-a-peek-inside-the-guts-of-chatgpt/\n3                                                 https://www.wired.com/story/neo-nazis-are-all-in-on-ai/\n4 https://consent.yahoo.com/v2/collectConsent?sessionId=1_cc-session_f99c26b2-0033-4e8f-88e4-175db87f35a7\n5                 https://www.theverge.com/2024/6/11/24176462/elon-musk-openai-lawsuit-sam-altman-dropped\n6                   https://gizmodo.com/ai-animate-memes-ugly-garbage-star-trek-picard-creator-1851544254\n                                                                                                                                                                                                          urlToImage\n1                                                                                  https://media.wired.com/photos/66625436bd6c904f877d7337/191:100/w_1280,c_limit/Tech-Mistrust-AI-Plaintext-Business-1194975140.jpg\n2                                                                                                   https://media.wired.com/photos/6661d484e7f0257b8be9c3d5/191:100/w_1280,c_limit/ChatGPT-Mind-Business-2R5EGF2.jpg\n3                                                                                    https://media.wired.com/photos/667211650f046d6ed8302191/191:100/w_1280,c_limit/politics_neonazi_extremist_ai_radicalization.jpg\n4                                                                                                                                                                                                               &lt;NA&gt;\n5 https://cdn.vox-cdn.com/thumbor/qhhAPf5iS_vHpweTtvPiRoNc2hg=/0x0:2040x1360/1200x628/filters:focal(1020x680:1021x681)/cdn.vox-cdn.com/uploads/chorus_asset/file/23906796/VRG_Illo_STK022_K_Radtke_Musk_Scales_2.jpg\n6                                                                                                            https://i.kinja-img.com/image/upload/c_fill,h_675,pg_1,q_80,w_1200/c7e1ab663b56268ad218b8d5653eb1a4.gif\n           publishedAt\n1 2024-06-07T13:00:00Z\n2 2024-06-06T17:45:55Z\n3 2024-06-20T09:00:00Z\n4 2024-06-10T16:50:43Z\n5 2024-06-11T21:29:42Z\n6 2024-06-17T17:15:00Z\n                                                                                                                                                                                                                       content\n1       It seems evident to me that almost 70 years after the first conference on artificial intelligencewhere the nascent fields leaders suggested the task would be completed within a decadethe field is now… [+3470 chars]\n2       ChatGPT developer OpenAIs approach to building artificial intelligence came under fire this week from former employees who accuse the company of taking unnecessary risks with technology that could be… [+3016 chars]\n3       Extremists across the US have weaponized artificial intelligence tools to help them spread hate speech more efficiently, recruit new members, and radicalize online supporters at an unprecedented spee… [+3092 chars]\n4        If you click 'Accept all', we and our partners, including 238 who are part of the IAB Transparency &amp; Consent Framework, will also store and/or access information on a device (in other words, use … [+678 chars]\n5 Elon Musk drops lawsuit against OpenAI\\r\\nElon Musk drops lawsuit against OpenAI\\r\\n / Elon Musk, a co-founder of OpenAI, has dropped his breach of contract lawsuit against the company. \\r\\nByEmma Roth, a … [+1737 chars]\n6       Have you ever wondered what your favorite memes might look like if they were animated? Well, wonder no longer. Thanks to advancements in artificial intelligence technology, you can now see those stat… [+4054 chars]\n  source.id         source.name\n1     wired               Wired\n2     wired               Wired\n3     wired               Wired\n4      &lt;NA&gt; Yahoo Entertainment\n5 the-verge           The Verge\n6      &lt;NA&gt;         Gizmodo.com\n\nprint(head(articles_df2))\n\n               author\n1                &lt;NA&gt;\n2                &lt;NA&gt;\n3 Emmalyse Brownstein\n4              msmash\n5     Dominick Reuter\n6      Theron Mohamed\n                                                                                                        title\n1                                                    Macron snap election leaves rivals stunned after EU vote\n2                                                         Parties ignoring 'painful' choices, says think tank\n3 More than half of banking jobs could be automated by AI — but banks will be slow to adopt, Citi report says\n4                                          AI in Finance is Like 'Moving From Typewriters To Word Processors'\n5                                 Chipotle is selling 'Chipotle Boy' bowls aimed at vest-wearing finance bros\n6                              It might be your fault you can't afford a house, says finance guru Dave Ramsey\n                                                                                                                                                                                                                                                           description\n1                                                                                                                                                                          Finance Minister Bruno Le Maire said the vote could have \"serious consequences\" for France.\n2                                                                                                                                                                  The economic research group as the main parties have “ducked” addressing public finance challenges.\n3                                                                                                                                                                 A new Citi report says finance will be \"at the forefront\" of changes due to artificial intelligence.\n4 The accounting and finance professions have long adapted to technology -- from calculators and spreadsheets to cloud computing. However, the emergence of generative AI presents both new challenges and opportunities for students looking to get ahead in the wor…\n5                                                                                                                                 \"You know who you are,\" Chipotle said in its promo for a double-chicken and white rice bowl, named for its reliable customer cohort.\n6                                                                                                               Record prices and steeper mortgage rates are a pain, but debt-fueled overspending is stopping some from becoming homeowners, according to Dave Ramsey.\n                                                                                                                     url\n1                                                                         https://www.bbc.com/news/articles/cv22jkmldlxo\n2                                                                         https://www.bbc.com/news/articles/ckkkk90lw50o\n3                           https://www.businessinsider.com/ai-could-automate-more-than-half-of-banking-jobs-citi-2024-6\n4            https://slashdot.org/story/24/06/17/162219/ai-in-finance-is-like-moving-from-typewriters-to-word-processors\n5                               https://www.businessinsider.com/chipotle-boy-bowl-promo-vest-wearing-finance-bros-2024-6\n6 https://www.businessinsider.com/dave-ramsey-buying-house-prices-mortgages-personal-finance-affordability-crisis-2024-6\n                                                                                          urlToImage\n1 https://ichef.bbci.co.uk/news/1024/branded_news/f6c7/live/fb4ccc50-273c-11ef-a0aa-318f04db7c53.jpg\n2 https://ichef.bbci.co.uk/news/1024/branded_news/c287/live/9b50a180-3206-11ef-8b63-6193f1de3bb7.png\n3                              https://i.insider.com/6673374ba76074d191cd3e9b?width=1200&format=jpeg\n4                                                             https://a.fsdn.com/sd/topics/ai_64.png\n5                              https://i.insider.com/6671cdf6a76074d191ccfb57?width=1200&format=jpeg\n6                              https://i.insider.com/66717276764df161125aa682?width=1200&format=jpeg\n           publishedAt\n1 2024-06-10T15:10:49Z\n2 2024-06-24T09:07:40Z\n3 2024-06-19T20:17:53Z\n4 2024-06-17T16:02:00Z\n5 2024-06-18T19:33:01Z\n6 2024-06-18T12:30:01Z\n                                                                                                                                                                                                                   content\n1 By Laura Gozzi, BBC News, Rome  Paul Kirby, BBC News, Brussels\\r\\nFrance's political leaders are scrambling to prepare for snap elections after President Emmanuel Macron dissolved parliament in respons… [+5112 chars]\n2   The UK's main political parties have ducked addressing the challenges facing the public finances in the election campaign and ignored the painful choices those imply, according to the Institute for F… [+1769 chars]\n3 Simon Dawson/REUTERS; Samantha Lee/Business Insider\\r\\n&lt;ul&gt;&lt;li&gt;A new Citi report says finance will be \"at the forefront\" of changes due to artificial intelligence.&lt;/li&gt;&lt;li&gt;Banking jobs are most at risk… [+3176 chars]\n4   Research last year by investment bank Evercore and Visionary Future, which incubates new ventures, highlights the workforce disruption being wreaked by generative AI. Analysing 160mn US jobs, the stu… [+1003 chars]\n5 A bowl of food from Chipotle.Jeffrey Greenberg/Universal Images Group via Getty Images\\r\\n&lt;ul&gt;&lt;li&gt;\"Chipotle Boys\" are now they're getting their own special.&lt;/li&gt;&lt;li&gt;\"You know who you are,\" Chipotle sai… [+2468 chars]\n6 Dave Ramsey.Anna Webber/Getty Images\\r\\n&lt;ul&gt;&lt;li&gt;Buying a house right now is difficult for a whole bunch of reasons, Dave Ramsey said.&lt;/li&gt;&lt;li&gt;But some people can't afford one as they waste money and ra… [+3726 chars]\n         source.id      source.name\n1             &lt;NA&gt;         BBC News\n2             &lt;NA&gt;         BBC News\n3 business-insider Business Insider\n4             &lt;NA&gt;     Slashdot.org\n5 business-insider Business Insider\n6 business-insider Business Insider"
  }
]